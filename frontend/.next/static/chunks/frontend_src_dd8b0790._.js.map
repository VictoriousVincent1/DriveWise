{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nishi/DriveWise/DriveWise/frontend/src/lib/firebase.ts"],"sourcesContent":["// Import the functions you need from the SDKs you need\r\nimport { initializeApp, getApps } from \"firebase/app\";\r\nimport { getAuth } from \"firebase/auth\";\r\nimport { getFirestore } from \"firebase/firestore\";\r\n// TODO: Add SDKs for Firebase products that you want to use\r\n// https://firebase.google.com/docs/web/setup#available-libraries\r\n\r\n// Your web app's Firebase configuration\r\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyBpo4pUlZnn2cwnJe5p8MT1am2__wnjU_0\",\r\n  authDomain: \"drivewise-7ffef.firebaseapp.com\",\r\n  projectId: \"drivewise-7ffef\",\r\n  storageBucket: \"drivewise-7ffef.firebasestorage.app\",\r\n  messagingSenderId: \"114530652361\",\r\n  appId: \"1:114530652361:web:ada5abf7ef0c3331693d18\",\r\n  measurementId: \"G-HRYSZ96801\"\r\n};\r\n\r\n// Initialize Firebase\r\nconst app = getApps().length ? getApps()[0] : initializeApp(firebaseConfig);\r\nexport const auth = getAuth(app);\r\nexport const db = getFirestore(app);"],"names":[],"mappings":"AAAA,uDAAuD;;;;;;;AACvD;AAAA;AACA;AAAA;AACA;AAAA;;;;AACA,4DAA4D;AAC5D,iEAAiE;AAEjE,wCAAwC;AACxC,mEAAmE;AACnE,MAAM,iBAAiB;IACrB,QAAQ;IACR,YAAY;IACZ,WAAW;IACX,eAAe;IACf,mBAAmB;IACnB,OAAO;IACP,eAAe;AACjB;AAEA,sBAAsB;AACtB,MAAM,MAAM,IAAA,8KAAO,IAAG,MAAM,GAAG,IAAA,8KAAO,GAAE,CAAC,EAAE,GAAG,IAAA,oLAAa,EAAC;AACrD,MAAM,OAAO,IAAA,oMAAO,EAAC;AACrB,MAAM,KAAK,IAAA,kLAAY,EAAC","debugId":null}},
    {"offset": {"line": 44, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nishi/DriveWise/DriveWise/frontend/src/app/profile/page.tsx"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { onAuthStateChanged, signOut, updateProfile } from \"firebase/auth\";\r\nimport { auth, db } from \"../../lib/firebase\";\r\nimport { doc, getDoc, setDoc } from \"firebase/firestore\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\nconst priorities = [\r\n  \"Cost\",\r\n  \"Safety\",\r\n  \"Number of People\",\r\n  \"Fuel Efficiency\",\r\n  \"Tech Features\",\r\n  \"Cargo Space\",\r\n  \"Performance\",\r\n  \"Brand Loyalty\",\r\n  \"Eco-Friendly\",\r\n];\r\n\r\nexport default function ProfilePage() {\r\n  const [user, setUser] = useState<any>(null);\r\n  const [displayName, setDisplayName] = useState(\"\");\r\n  const [carNeeds, setCarNeeds] = useState(\"\");\r\n  const [selectedPriorities, setSelectedPriorities] = useState<string[]>([]);\r\n  const [saving, setSaving] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    const unsub = onAuthStateChanged(auth, async (u) => {\r\n      if (!u) {\r\n        router.push(\"/auth/login\");\r\n        return;\r\n      }\r\n      setUser(u);\r\n      setDisplayName(u?.displayName || \"\");\r\n      \r\n      // Load existing profile data\r\n      const ref = doc(db, \"users\", u.uid);\r\n      const snap = await getDoc(ref);\r\n      \r\n      if (snap.exists()) {\r\n        const data = snap.data() as any;\r\n        setCarNeeds(data.carNeeds || \"\");\r\n        setSelectedPriorities(data.priorities || []);\r\n        \r\n        // If profile is already completed, redirect to user page\r\n        if (data.profileCompleted) {\r\n          router.push(\"/user\");\r\n        }\r\n      }\r\n    });\r\n    return () => unsub();\r\n  }, [router]);\r\n\r\n  const handlePriority = (p: string) => {\r\n    setSelectedPriorities((prev) =>\r\n      prev.includes(p)\r\n        ? prev.filter((x) => x !== p)\r\n        : prev.length < 3\r\n        ? [...prev, p]\r\n        : prev\r\n    );\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    setSaving(true);\r\n    setError(\"\");\r\n    try {\r\n      if (user && displayName) {\r\n        await updateProfile(user, { displayName });\r\n      }\r\n      if (user) {\r\n        await setDoc(doc(db, \"users\", user.uid), {\r\n          displayName,\r\n          email: user.email,\r\n          carNeeds,\r\n          priorities: selectedPriorities,\r\n          profileCompleted: true,\r\n          updatedAt: Date.now(),\r\n        }, { merge: true });\r\n      }\r\n      setSaving(false);\r\n      router.push(\"/user\");\r\n    } catch (err: any) {\r\n      console.error(\"Save error:\", err);\r\n      setError(err.message);\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    await signOut(auth);\r\n    router.push(\"/auth/login\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-lg mx-auto mt-12 bg-white p-8 rounded shadow\">\r\n      <h1 className=\"text-2xl font-bold mb-6\">Your Profile</h1>\r\n      <div className=\"mb-4\">\r\n        <label className=\"block mb-1\">Name</label>\r\n        <input type=\"text\" className=\"w-full border rounded px-2 py-1\" value={displayName} onChange={e => setDisplayName(e.target.value)} />\r\n      </div>\r\n      <div className=\"mb-4\">\r\n        <label className=\"block mb-1\">What are you looking for in a car?</label>\r\n        <textarea className=\"w-full border rounded px-2 py-1\" value={carNeeds} onChange={e => setCarNeeds(e.target.value)} placeholder=\"Describe your needs, e.g. family, commute, adventure...\" />\r\n      </div>\r\n      <div className=\"mb-4\">\r\n        <label className=\"block mb-1\">Top 3 Priorities</label>\r\n        <div className=\"flex flex-wrap gap-2\">\r\n          {priorities.map((p) => (\r\n            <button\r\n              key={p}\r\n              type=\"button\"\r\n              className={`px-3 py-1 rounded border ${selectedPriorities.includes(p) ? \"bg-blue-600 text-white border-blue-600\" : \"bg-white border-gray-300\"}`}\r\n              onClick={() => handlePriority(p)}\r\n              disabled={!selectedPriorities.includes(p) && selectedPriorities.length >= 3}\r\n            >\r\n              {p}\r\n            </button>\r\n          ))}\r\n        </div>\r\n        <div className=\"text-xs text-gray-500 mt-1\">Choose up to 3 priorities.</div>\r\n      </div>\r\n      {error && <div className=\"text-red-600 text-sm mb-2\">{error}</div>}\r\n      <button onClick={handleSave} className=\"w-full bg-blue-600 text-white py-2 rounded mt-2\" disabled={saving}>{saving ? \"Saving...\" : \"Save Profile\"}</button>\r\n      <button onClick={handleLogout} className=\"w-full bg-gray-200 text-gray-700 py-2 rounded mt-4\">Log Out</button>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}